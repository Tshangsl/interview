工作小结
做了些什么
1. `微搭-组件` 移动端组件优化,low-tea-basis组件分类,tea_crm组件库抽成,组件迁移。
2. `微搭-行业应用` 电商交易模板部分内容，hr模板功能新增及优化，企业招聘模板。
- 微搭
3. `微搭-控制台` hr模板上架模板中心,构建日志二期,销毁文案优化,数据源字段新增,批量发布，bug修复。
- 控制台开发
4. `微搭-应用市场` 应用市场客服二维码支持可配置化。
- 应用市场开发 nextjs ssr服务器端渲染
5. `微搭-文档` 控制台接入文档，hr模板使用文档。
取得的收获
1. `微搭-组件` 了解组件实现和组件文档生成使用，初步了解jest，storybook。

2. `微搭-行业应用` 了解云开发一系列相关概念，学习使用开发者调试工具更多使用方法，性能分析，断点调试，了解CMS相关。
3. `微搭-控制台` 学习React,React-redux,redux-saga,saga-duck,hook,whistle的使用,实际项目中进一步熟悉ts使用与git的使用，了解schema。
4. `微搭-应用市场` 学习nextjs,项目中进一步认识ssr。
5. `微搭-分享` 了解性能优化可以怎么做，storybook快速生成组件文档，云开发网关架构设计，各种node框架优势选型。

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

> 云开发一些概念
- 云开发/云数据库/云存储/静态网站托管/云函数/云计算/云托管
> 云开发(Tencent CloudBase TCB)
1. 云开发Cloudbase是腾讯云出品的Serverless云原生一体化产品方案 为小程序 web应用 移动应用提供一站式后端服务 弱化了运维和服务器概念 有更多精力关注业务代码
- ClouBase在后台创建环境后 会默认提供云数据库 云存储 云函数 静态资源部署等功能

> 云数据库
1. CloudBase提供的核心功能之一 提供基础读写、聚合搜索、数据库事务、实时推送等功能。是一个文档型数据库，数据库的每条记录是一个类似JSON格式的对象。
- 云数据库可以通过各类SDK实现增删改查，以及其他常规数据库功能，比如索引、事务之类的。
- 同时，还提供了一些常规数据库不支持的功能，比如实时推送，可以使用SDK的DB的watch功能，监听数据库变化，当数据库变化会执行回调函数，这个可以很方便的实现一个IM即时聊天系统，当一个用户推送消息，写入到数据库中，另一个用户可以在watch回调中接收这个变化，实现消息同步功能。
- 同时还支持备份和回档功能，增加项目容错。
- 另外，和正常开发直觉不同的是，客户端SDK可以直接访问数据库，而不用通过云函数或者后端接口，用户可以直接使用腾讯云的登录体系，最简单的就是匿名登录，然后通过SDK访问数据库，当然数据库是有安全规则，一般来说，用户自己创建的数据，其他用户是不可以修改的，而类似user的库，可以设置安全规则为仅管理员可读写，这样普通用户就不能修改了。

> 云存储
- 云开发为开发者提供了存储空间、将文件上传到云端存储空间内以及带权限的云端文件下载能力，开发者可以使用云开发控制台或使用 SDK 调用接口来使用存储功能。云开发默认支持 CDN 加速，并提供免费 CDN 域名。
- 每一个上传到云开发的文件都有一个全网唯一的fileID，使用fileID可以更加安全便捷的访问文件，比如私有权限的文件的访问链接的有效期是有限的，开发者可以选择使用fileID动态的换取可以访问的文件链接地址。

> 静态网站托管
- CloudBase 静态网站托管可以为您的 Web 应用、静态资源提供快速、安全的托管服务。只需要一个命令，并可以快速地部署静态资源，并且使用 CDN（内容分发网络）加快资源的访问速度。
- 静态资源将会被缓存在遍布各地的 CDN 边缘服务器上。无论您的用户身处何处，内容都可快速加载。
- 支持自定义域名

> 云函数
- 使用CloudBase的云函数 可以以函数的形式运行后端代码 响应SDK的调用或者http请求 代码会存储在云端 并在托管环境中运行 无需管理或运维自己的服务器
- 存储在云端的代码也可以是压缩后的 并不必须是源码 这要看使用的http框架 如nestjs支持代码打包 只把dist文件以及package.json放进去即可

> 云计算
- 根据服务类型不同 云计算可以分为三类
1. 基础设施即服务Laas Infrastructure as a Service
    - 把IT基础设施作为一种服务通过网络向外提供 并根据用户对资源的实际使用量或占用量进行计费的一种服务模式
    - 类似共享厨房服务
2. 平台即服务Paas Platform as a Service
    - 一种云计算服务 提供运算平台与解决方案服务
3. 软件即服务 Saas Soft as a Service
    - 通过网络提供软件服务
- 从Laas 到Paas 到Saas 服务商提供的服务及产品越来越多 普通用户承担的工作量越来越少

- 这三种云计算服务 有时称为云计算堆栈 因为它们构建堆栈 它们位于彼此之上

> 云托管(Tencent CloudBase Run)
- 是云开发(Tencent CloudBase TCB)提供的新一代云原生应用引擎 支持托管任意容器化应用

> CloudBase CMS是云开发推出的 基于Nodejs的Headless内容管理平台 提供了丰富的内容管理功能 安装简单 易于二次开发 并与云开发的生态系统紧密结合 助力开发者提升开发效率
- 源码部署时 CloudBase CMS后端服务回部署在云托管中

0. 做了哪些事情

    0. 从产品功能来讲 微搭产品目的很简单 就是让懂很少代码知识的人 经过一些简单的培训 就能使用拖拉拽组件的方式 构建出能编译到三端的应用程序
    - 整体上来说 微搭产品可以大致分为这几块 编辑器 组件库 控制台 数据源管理 模版中心 应用市场 每一块实现起来都很复杂 我主要做控制台 应用市场 和模版中心介绍
    
    > 控制台开发
    0. 从产品功能上讲 是编辑器 cms数据源 流程管理 模版中心等入口 微搭产品的使用从控制台开始
    1. 从技术上讲 微搭控制台技术栈为React+TS 最开始状态管理使用saga-duck 目前在逐步换成hook Prettier作为开发规范
    2. 从控制台整体实现的各个模块功能上来说 控制台基础能力上分为 应用管理 数据源管理 流程管理 用户权限 模版管理 组件库管理六大部分 资源管理有环境管理 套餐包管理 小程序开发认证
    3. 从开发流程上讲 控制台前端本地整体开发有四个环境 体验 测试 预发 现网
        - 通过whistle配置不同的代理 并在console中输入相关命令进入相关环境 具体处在哪个环境 可以抓包在请求体里看到
        - 体验环境 测试环境 预发和现网 分别是三个数据库 而预发和现网通过__区分
        - 应用一般会在体验和测试环境进行开发 然后自测无误与后端同学在预发环境联调
        - 本地开发是通过SwitchOmega插件 配置相关whistle代理代理到本地 本地启动控制台代码 使用redux-logger作为提示 进行开发
        - 大致流程为  正常访问腾讯云 - SwitchOmega代理到8899端口 - 访问whistle -根据匹配规则代转发到端口8322 tea编译后的本地文件
    4. 从代码结构上讲 src主要分common和routes两部分 common为公共模块部分 内部有adapters数据聚合层 interfaces ts类型类型声明 models云API的请求调用 routes为各个模块对应的功能模块 存放业务路由实现 每个模块都有router文件用来集成模块下路由 然后统一放在app.js入口文件里
    5. 我做的内容有 hr模版上架模板中心 构建日志二期 销毁文案优化 数据源字段新增 批量发布 以及各个页面的性能优化
    
    - 遇到哪些难点
    1. 技术上 对react不熟悉 对于saga-duck这种分布式的状态管理不熟悉 对hook whistle不熟悉 学习这些技能点花费了一些时间
    2. 代码结构上 对代码结构不熟悉
    3. 对各种代理不明白 环境切换 代理配置

    - 如何解决
    1. 学习技术

    - 优化
    1. 各个页面白屏闪现 风格统一 功能新增

    - 构建
    - 使用的是tea框架开发 现网测试同学测试通过后 提merge到主分支 review后 确定代码风格符合规范没有逻辑错误 merge进主分支 然后在主分支上进行构建 使用tea build和tea commit 之后会自动导入星云变更单和野鹤单 星云会将代码打包 相关静态文件部署到现网服务器上 等到部署到现网之后 野鹤灰度发布 测试同学回归测试 确认无误后 现网发布

    > 应用市场开发
    0. 从产品功能上讲 做好的模版应用
    1. 从技术上讲 用到的技术栈为nextjs 
    - 用户 -> Request weda.cloud.tencent.com 云开发静态托管(CDN+COS) ->Request Node接入层 -> Request 云市场后台服务
                                            部署
                                            Next预渲染          Request
                                            定时触发/手动触发+审批
    2. 从实现功能上来讲 
    3. 从开发流程上来讲
        - 拉取代码 npm run dev 启动服务 运行在在http://localhost:3000 使用whistle将域名weda.cloud.tencent.com代理到本地 然后访问该域名 可在本地看到效果
        - 和后端同学在测试环境链条 配置测试代理 
        - 和后端同学在预发/体验环境联调 预发和体验环境的云API代理的ip是同一个 后端根据regionId地域 来区分是体验环境 还是语法环境
        1. 本地构建 npm run build
        2. 构建后的结果在./out 文件夹中 需要将它部署到自己的云开发环境中的静态托管上
        3. 让测试同学配置相关的代理
        4. 发布 走Merge Request合并后 会自动触发Coding CI流水线构建 发布到线上
    - 遇到的难点
    1. 对nextjs技术不熟悉
    
    - 如何解决
    1. 学习
    - 

    > 模版开发
    - 我开发过的模版有hr模版的二次升级 该模版属于pc端 企业招聘模版 适用目标在h5端和小程序端 
    - 此处的开发不是传统意义上的代码开发 是在已经抽象出来的产品形态链基础上做模版开发 
    - 做这个的目的大致有两个
    - 微搭产品毕竟还属于起步阶段 自然免不了会有一些bug或者一些需要优化的体验点 我们开发人员在开发模版的过程中 可以找到这些问题所在 并且进行修改完善 产品升级
    - 还有一个目的在于 制作的这些模版是通过产品同学市场调研得出的用户需求量较大的模版 微搭团队的目的是打造一百套明星模版 可供用户开箱即用 

    - 做模版开发从产品需求上是非常重要的一个点 毕竟它是用户最直接能看到的东西 可以说是一个产品的门面 或者说是吸引用户的一个点 
    - 但是做模版开发从技术上无疑是一个非常痛苦的事情 因为它是基于一套不成熟的产品链做开发 作为一个顶层项目 它要为它下面的任何一部分的任何一个小bug买单 例如 做一套模版要依赖的有 编辑器 数据源 组件库 这三部分任何一个部分的改动都有可能会导致上层结构变化 性能不稳定 所以一套模版的开发往往是周期较长 要通过开发同学的不断调整和测试同学的反复测试
    - 并且由于它抽象层面比较高 面向用户群就是一些不需要有太多编程知识的人 所以如果只是简单的做模版开发 从中能学到的东西并不多 除非往深层次了解 例如搞懂其下面支持的cms 云开发 云存储 云函数 云数据库 源码组件 低码组件 编辑器实现等等 但是又由于模版开发可能会由于上述原因反复出问题 并且底层实现不是自己组内的工作 所以很难去往深层次看
    - 所以模版开发给我最大的收获 应该就是思维上的拓广吧 

    > 组件开发    
    - 我并没有做实际的组件开发 做的只是在一些原有组件库的基础上 优化 分类 抽成 迁移等工作
    - 微搭中组件分为源码组件 和低码组件 又可以按照端分类 分成pc端组件low-tea-basis h5和小程序端组件 对应官方组件库
    - 低码组件从机制上可分为源码组件和低码组件
    1. 源码组件 是指直接通过代码编写实现各平台的一类组件 源码组件是低码组件的原子结构
    2. 低码组件 是指由其他组件组装而成的组件 低码组件的运行平台取决于所直接或间接依赖的源码组件的平台兼容性
    - 优化是指组件层级 优化 只是按使用率修改了属性层级 
    - 分类是low-tea-basis组件库原本分类较差 按照市场上主流组件库 进行重新划分 参考的组件库有Ant ElementUI Uniapp
    - 抽成是指hr模版 根据用到的组件 把它们抽出来封装成一个单独的组件库 模版安装时只携带这个组件库
    - 迁移 是指把low-tea-basis组件库中的几个组件迁移到官方组件库中

- 模版应用开发
1. 遇到哪些难点
2. 怎么解决
3. 做过哪些优化 
4. 优化有量化吗
5. 用过哪些loader plugin